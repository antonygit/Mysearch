{"ast":null,"code":"import _slicedToArray from\"/home/arulantony/layout/book-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import axios from\"axios\";import logo from\"../image/NoRecordFound.png\";var Search=function Search(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isNodata=_useState6[0],setIsNodata=_useState6[1];/*Single fetch*/var fetchByIdData=function fetchByIdData(){var a=[];axios.get(\"https://fakerestapi.azurewebsites.net/api/Authors/\".concat(id)).then(function(result){console.log();a.push(result.data);console.log(a);setData(a);}).catch(function(err){setIsNodata(true);console.log(\"invalid data\");});};/*Multi fetch*/var fetchAllData=function fetchAllData(){axios.get(\"https://fakerestapi.azurewebsites.net/api/Authors\").then(function(result){setData(result.data);}).catch(function(err){console.log(err);});};useEffect(function(){if(id)fetchByIdData();else{fetchAllData();}},[id]);var settingId=function settingId(){var Id=document.getElementById(\"search\").value;setId(Id);setIsNodata(false);};var debounce=function debounce(f,d){var timer;return function(){var _arguments=arguments;var context=this;clearTimeout(timer);timer=setTimeout(function(){settingId.apply(context,_arguments);},d);};};var _myDebounce=debounce(settingId,300);document.addEventListener(\"click\",function(event){var id=event.target.id;if(event.target.id!==\"search\")axios.delete(\"https://fakerestapi.azurewebsites.net/api/Authors/\".concat(id)).then(function(result){console.log(result);}).catch(function(err){console.log(err);});event.stopImmediatePropagation();});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:\"main\"},/*#__PURE__*/React.createElement(\"form\",{name:\"login\",className:\"search-form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Search Using ID..\",name:\"username\",id:\"search\",required:true,autoComplete:\"off\",onChange:_myDebounce})),/*#__PURE__*/React.createElement(\"div\",{className:\"table-search\"},!isNodata?/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Id\"),/*#__PURE__*/React.createElement(\"th\",null,\"Book id\"),/*#__PURE__*/React.createElement(\"th\",null,\"First name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Last name\"))),/*#__PURE__*/React.createElement(\"tbody\",null,data.map(function(data){return/*#__PURE__*/React.createElement(\"tr\",{key:data.ID},/*#__PURE__*/React.createElement(\"td\",null,data.ID),/*#__PURE__*/React.createElement(\"td\",null,data.IDBook),/*#__PURE__*/React.createElement(\"td\",null,data.FirstName),/*#__PURE__*/React.createElement(\"td\",null,data.LastName),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",id:data.ID,className:\"delete-table\"},\"Delete\"),\" \"));}))):/*#__PURE__*/React.createElement(\"img\",{src:logo}))));};export default Search;","map":{"version":3,"sources":["/home/arulantony/layout/book-store/src/components/Search.jsx"],"names":["React","Fragment","useEffect","useState","axios","logo","Search","data","setData","id","setId","isNodata","setIsNodata","fetchByIdData","a","get","then","result","console","log","push","catch","err","fetchAllData","settingId","Id","document","getElementById","value","debounce","f","d","timer","context","clearTimeout","setTimeout","apply","arguments","_myDebounce","addEventListener","event","target","delete","stopImmediatePropagation","map","ID","IDBook","FirstName","LastName"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport logo from \"../image/NoRecordFound.png\";\n\nconst Search = () => {\n  const [data, setData] = useState([]);\n  const [id, setId] = useState(\"\");\n  const [isNodata, setIsNodata] = useState(false);\n\n  /*Single fetch*/\n  const fetchByIdData = () => {\n    let a = [];\n    axios\n      .get(`https://fakerestapi.azurewebsites.net/api/Authors/${id}`)\n      .then(result => {\n        console.log();\n        a.push(result.data);\n        console.log(a);\n        setData(a);\n      })\n      .catch(err => {\n        setIsNodata(true);\n        console.log(\"invalid data\");\n      });\n  };\n\n  /*Multi fetch*/\n\n  const fetchAllData = () => {\n    axios\n      .get(\"https://fakerestapi.azurewebsites.net/api/Authors\")\n      .then(result => {\n        setData(result.data);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    if (id) fetchByIdData();\n    else {\n      fetchAllData();\n    }\n  }, [id]);\n\n  const settingId = () => {\n    var Id = document.getElementById(\"search\").value;\n    setId(Id);\n    setIsNodata(false);\n  };\n\n  const debounce = (f, d) => {\n    let timer;\n    return function() {\n      let context = this;\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        settingId.apply(context, arguments);\n      }, d);\n    };\n  };\n\n  const _myDebounce = debounce(settingId, 300);\n\n  document.addEventListener(\"click\", function(event) {\n    let id = event.target.id;\n    if (event.target.id !== \"search\")\n      axios\n        .delete(`https://fakerestapi.azurewebsites.net/api/Authors/${id}`)\n        .then(result => {\n          console.log(result);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    event.stopImmediatePropagation();\n  });\n  return (\n    <Fragment>\n      <section className=\"main\">\n        <form name=\"login\" className=\"search-form\">\n          <input\n            type=\"text\"\n            placeholder=\"Search Using ID..\"\n            name=\"username\"\n            id=\"search\"\n            required\n            autoComplete=\"off\"\n            onChange={_myDebounce}\n          />\n          {/* <div className=\"button-submit\">\n            <button type=\"submit\" id=\"loginButton\">\n              Search\n            </button>\n          </div> */}\n        </form>\n        <div className=\"table-search\">\n          {!isNodata ? (\n            <table>\n              <tbody>\n                <tr>\n                  <th>Id</th>\n                  <th>Book id</th>\n                  <th>First name</th>\n                  <th>Last name</th>\n                </tr>\n              </tbody>\n              <tbody>\n                {data.map(data => (\n                  <tr key={data.ID}>\n                    <td>{data.ID}</td>\n\n                    <td>{data.IDBook}</td>\n                    <td>{data.FirstName}</td>\n                    <td>{data.LastName}</td>\n                    <td>\n                      <button\n                        type=\"submit\"\n                        id={data.ID}\n                        className=\"delete-table\"\n                      >\n                        Delete\n                      </button>{\" \"}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          ) : (\n            <img src={logo} />\n          )}\n        </div>\n      </section>\n    </Fragment>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}